<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Representative Paper Finder</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">

    <style>
        :root {
            --ink: #1a1a1f;
            --ink-light: #3d3d47;
            --paper: #f7f5f0;
            --paper-warm: #ede9df;
            --accent: #c9553d;
            --accent-hover: #a84430;
            --gold: #b8860b;
            --gold-light: #d4a845;
            --success: #2d5a3f;
            --border: rgba(26, 26, 31, 0.12);
            --shadow-soft: 0 2px 20px rgba(26, 26, 31, 0.08);
            --shadow-medium: 0 8px 40px rgba(26, 26, 31, 0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 18px;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'DM Sans', -apple-system, sans-serif;
            background: var(--paper);
            color: var(--ink);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Noise texture overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.03;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            z-index: 1000;
        }

        /* Header */
        header {
            padding: 2rem 0;
            border-bottom: 1px solid var(--border);
            background: linear-gradient(180deg, var(--paper-warm) 0%, var(--paper) 100%);
        }

        .header-inner {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-mark {
            width: 48px;
            height: 48px;
            background: var(--ink);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: rotate(-3deg);
            box-shadow: var(--shadow-soft);
        }

        .logo-mark svg {
            width: 28px;
            height: 28px;
            stroke: var(--paper);
        }

        .logo-text {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 1.1rem;
            font-weight: 600;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .edition {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-style: italic;
            font-size: 0.85rem;
            color: var(--ink-light);
        }

        /* Main content */
        main {
            max-width: 900px;
            margin: 0 auto;
            padding: 4rem 2rem 6rem;
        }

        /* Hero section */
        .hero {
            text-align: center;
            margin-bottom: 4rem;
            animation: fadeUp 0.8s ease-out;
        }

        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero h1 {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 700;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            letter-spacing: -0.02em;
        }

        .hero h1 span {
            display: block;
            font-style: italic;
            font-weight: 400;
            color: var(--accent);
        }

        .hero-subtitle {
            font-size: 1.1rem;
            color: var(--ink-light);
            max-width: 500px;
            margin: 0 auto;
        }

        /* Decorative line */
        .decorative-line {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin: 3rem 0;
        }

        .decorative-line::before,
        .decorative-line::after {
            content: '';
            flex: 1;
            max-width: 120px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--border), transparent);
        }

        .decorative-line svg {
            width: 20px;
            height: 20px;
            fill: var(--gold);
            opacity: 0.6;
        }

        /* Steps container */
        .steps-container {
            position: relative;
        }

        /* Step */
        .step {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-soft);
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: stepFadeIn 0.5s ease-out backwards;
        }

        .step:nth-child(1) { animation-delay: 0.1s; }
        .step:nth-child(2) { animation-delay: 0.2s; }
        .step:nth-child(3) { animation-delay: 0.3s; }

        @keyframes stepFadeIn {
            from {
                opacity: 0;
                transform: translateY(15px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .step::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--accent);
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.3s ease;
        }

        .step.active::before {
            transform: scaleY(1);
        }

        .step.completed {
            opacity: 0.6;
        }

        .step.completed::before {
            background: var(--success);
            transform: scaleY(1);
        }

        .step.hidden {
            display: none;
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .step-number {
            width: 36px;
            height: 36px;
            border: 2px solid var(--ink);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-weight: 700;
            font-size: 1rem;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .step.completed .step-number {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .step.completed .step-number::after {
            content: '\2713';
        }

        .step.completed .step-number span {
            display: none;
        }

        .step-title {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .step-content {
            padding-left: 52px;
        }

        /* Form elements */
        .input-group {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .input-label {
            display: block;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--ink-light);
            margin-bottom: 0.5rem;
        }

        input[type="text"],
        select {
            width: 100%;
            padding: 1rem 1.25rem;
            font-family: 'DM Sans', sans-serif;
            font-size: 1rem;
            border: 2px solid var(--border);
            border-radius: 6px;
            background: var(--paper);
            color: var(--ink);
            transition: all 0.2s ease;
            appearance: none;
        }

        input[type="text"]:focus,
        select:focus {
            outline: none;
            border-color: var(--ink);
            box-shadow: 0 0 0 4px rgba(26, 26, 31, 0.08);
        }

        input[type="text"]::placeholder {
            color: #9a9a9a;
        }

        /* Custom select arrow */
        .select-wrapper {
            position: relative;
        }

        .select-wrapper::after {
            content: '';
            position: absolute;
            right: 1.25rem;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 6px solid var(--ink);
            pointer-events: none;
        }

        /* Range slider */
        .range-container {
            margin-bottom: 1.5rem;
        }

        .range-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 0.75rem;
        }

        .range-value {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--paper-warm);
            appearance: none;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--ink);
            cursor: pointer;
            box-shadow: var(--shadow-soft);
            transition: transform 0.2s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border: none;
            border-radius: 50%;
            background: var(--ink);
            cursor: pointer;
            box-shadow: var(--shadow-soft);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            font-family: 'DM Sans', sans-serif;
            font-size: 0.9rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: var(--ink);
            color: white;
        }

        .btn-primary:hover {
            background: var(--ink-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-accent {
            background: var(--accent);
            color: white;
        }

        .btn-accent:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-outline {
            background: transparent;
            color: var(--ink);
            border: 2px solid var(--ink);
        }

        .btn-outline:hover {
            background: var(--ink);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn svg {
            width: 18px;
            height: 18px;
        }

        /* Loading state */
        .btn.loading {
            pointer-events: none;
        }

        .btn.loading .btn-text {
            opacity: 0;
        }

        .btn.loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top-color: currentColor;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Results card */
        .results-card {
            background: linear-gradient(135deg, var(--ink) 0%, #2a2a35 100%);
            color: white;
            border-radius: 12px;
            padding: 3rem;
            position: relative;
            overflow: hidden;
            animation: resultsFadeIn 0.6s ease-out;
        }

        @keyframes resultsFadeIn {
            from {
                opacity: 0;
                transform: scale(0.98);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .results-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(201, 85, 61, 0.15) 0%, transparent 70%);
            pointer-events: none;
        }

        .results-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1.5rem;
        }

        .results-badge svg {
            width: 14px;
            height: 14px;
            fill: var(--gold-light);
        }

        .results-title {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 1.8rem;
            font-weight: 600;
            line-height: 1.3;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .results-abstract {
            font-size: 0.95rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.8);
            border-left: 2px solid var(--accent);
            padding-left: 1.5rem;
            margin-bottom: 2rem;
            max-height: 200px;
            overflow-y: auto;
        }

        .results-abstract::-webkit-scrollbar {
            width: 4px;
        }

        .results-abstract::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
        }

        .results-abstract::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }

        .results-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: rgba(212, 168, 69, 0.15);
            border-radius: 6px;
            font-size: 0.85rem;
            color: var(--gold-light);
            margin-bottom: 1.5rem;
        }

        .results-info svg {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }

        .results-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn-light {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-light:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Status messages */
        .status {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 1.25rem;
            border-radius: 6px;
            font-size: 0.9rem;
            margin-top: 1rem;
            animation: statusFade 0.3s ease;
        }

        @keyframes statusFade {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .status-loading {
            background: rgba(26, 26, 31, 0.05);
            color: var(--ink-light);
        }

        .status-loading::before {
            content: '';
            width: 16px;
            height: 16px;
            border: 2px solid var(--border);
            border-top-color: var(--ink);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        .status-error {
            background: rgba(201, 85, 61, 0.1);
            color: var(--accent);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            border-top: 1px solid var(--border);
            font-size: 0.85rem;
            color: var(--ink-light);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .social-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--paper-warm);
            transition: all 0.3s ease;
        }

        .social-icon:hover {
            background: var(--accent);
            transform: translateY(-2px);
        }

        .social-icon svg {
            width: 18px;
            height: 18px;
            fill: var(--ink-light);
            transition: fill 0.3s ease;
        }

        .social-icon:hover svg {
            fill: white;
        }

        /* Responsive */
        @media (max-width: 640px) {
            html {
                font-size: 16px;
            }

            .step {
                padding: 1.5rem;
            }

            .step-content {
                padding-left: 0;
                padding-top: 1rem;
            }

            .results-card {
                padding: 2rem 1.5rem;
            }

            .results-actions {
                flex-direction: column;
            }

            .btn {
                justify-content: center;
            }
        }

        .fade-enter {
            animation: fadeUp 0.4s ease-out;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-inner">
            <div class="logo">
                <div class="logo-mark">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                </div>
                <div>
                    <div class="logo-text">Representative Paper</div>
                    <div class="edition">Research Discovery Tool</div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section class="hero">
            <h1>
                Find the Paper That
                <span>Defines a Researcher</span>
            </h1>
            <p class="hero-subtitle">
                Discover the most representative publication in any researcher's body of work using semantic analysis.
            </p>
        </section>

        <div class="decorative-line">
            <svg viewBox="0 0 24 24"><path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/></svg>
        </div>

        <div class="steps-container">
            <!-- Step 1: Search -->
            <div class="step active" id="step1">
                <div class="step-header">
                    <div class="step-number"><span>1</span></div>
                    <h2 class="step-title">Search for a Researcher</h2>
                </div>
                <div class="step-content">
                    <div class="input-group">
                        <label class="input-label" for="researcher-name">Researcher Name</label>
                        <input
                            type="text"
                            id="researcher-name"
                            placeholder="e.g., Yann LeCun, Geoffrey Hinton..."
                            autocomplete="off"
                        >
                    </div>
                    <button class="btn btn-primary" id="search-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                        </svg>
                        <span class="btn-text">Search</span>
                    </button>
                    <div id="search-status"></div>
                </div>
            </div>

            <!-- Step 2: Select Author -->
            <div class="step hidden" id="step2">
                <div class="step-header">
                    <div class="step-number"><span>2</span></div>
                    <h2 class="step-title">Select the Author</h2>
                </div>
                <div class="step-content">
                    <div class="input-group">
                        <label class="input-label" for="author-select">Choose from results</label>
                        <div class="select-wrapper">
                            <select id="author-select">
                                <option value="">Select an author...</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="confirm-author-btn" disabled>
                        <span class="btn-text">Continue</span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Step 3: Configure & Find -->
            <div class="step hidden" id="step3">
                <div class="step-header">
                    <div class="step-number"><span>3</span></div>
                    <h2 class="step-title">Find Representative Paper</h2>
                </div>
                <div class="step-content">
                    <div class="range-container">
                        <div class="range-header">
                            <label class="input-label" for="years-slider">Time window</label>
                            <span class="range-value"><span id="years-value">5</span> years</span>
                        </div>
                        <input
                            type="range"
                            id="years-slider"
                            min="1"
                            max="10"
                            value="5"
                        >
                    </div>
                    <button class="btn btn-accent" id="find-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                        </svg>
                        <span class="btn-text">Analyze Publications</span>
                    </button>
                    <div id="find-status"></div>
                </div>
            </div>

            <!-- Results -->
            <div class="step hidden" id="results-step">
                <div class="results-card">
                    <div class="results-badge">
                        <svg viewBox="0 0 24 24"><path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/></svg>
                        Representative Paper
                    </div>
                    <h3 class="results-title" id="result-title">Loading...</h3>
                    <div class="results-abstract" id="result-abstract">Loading...</div>
                    <div class="results-info hidden" id="result-info">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        <span id="result-info-text"></span>
                    </div>
                    <div class="results-actions">
                        <button class="btn btn-light" id="start-over-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 4v6h6M23 20v-6h-6"/>
                                <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
                            </svg>
                            <span class="btn-text">Start Over</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>Powered by <a href="https://openalex.org" target="_blank">OpenAlex</a> &amp; <a href="https://huggingface.co" target="_blank">HuggingFace</a></p>
        <div class="social-links">
            <a href="https://www.linkedin.com/in/gilzeevi" class="social-icon" aria-label="LinkedIn" target="_blank" rel="noopener">
                <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.447 20.452h-3.554v-5.569c0-1.327-.027-3.039-1.852-3.039-1.854 0-2.136 1.447-2.136 2.939v5.669h-3.554V9h3.414v1.561h.049c.476-.9 1.637-1.852 3.366-1.852 3.595 0 4.262 2.366 4.262 5.451v6.292zM5.337 7.433a2.062 2.062 0 1 1 0-4.124 2.062 2.062 0 0 1 0 4.124zM7.119 20.452H3.554V9h3.565v11.452zM22.225 0H1.771C.792 0 0 .771 0 1.729v20.542C0 23.229.792 24 1.771 24h20.451C23.206 24 24 23.229 24 22.271V1.729C24 .771 23.206 0 22.225 0z"/>
                </svg>
            </a>
            <a href="mailto:gzeevi25@gmail.com" class="social-icon" aria-label="Email">
                <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"/>
                </svg>
            </a>
            <a href="https://github.com/gilzeevi25" class="social-icon" aria-label="GitHub" target="_blank" rel="noopener">
                <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.386-1.333-1.756-1.333-1.756-1.089-.744.083-.729.083-.729 1.205.084 1.84 1.238 1.84 1.238 1.07 1.835 2.808 1.305 3.495.998.108-.775.418-1.305.76-1.605-2.665-.303-5.466-1.332-5.466-5.931 0-1.31.469-2.381 1.237-3.221-.124-.303-.536-1.523.117-3.176 0 0 1.009-.322 3.301 1.23.96-.267 1.982-.399 3-.405 1.02.006 2.04.138 3 .405 2.291-1.553 3.3-1.23 3.3-1.23.654 1.653.242 2.873.118 3.176.77.84 1.236 1.911 1.236 3.221 0 4.61-2.807 5.625-5.479 5.921.431.371.814 1.102.814 2.221 0 1.604-.015 2.896-.015 3.289 0 .319.218.694.824.576C20.565 21.796 24 17.298 24 12c0-6.627-5.373-12-12-12z"/>
                </svg>
            </a>
        </div>
    </footer>

    <script>
        // ============================================================================
        // Configuration - UPDATE THIS AFTER DEPLOYING BACKEND TO RENDER
        // ============================================================================
        const API_BASE = 'https://representative-paper-webapp-1.onrender.com';

        // ============================================================================
        // State
        // ============================================================================
        let selectedAuthorId = null;
        let authorsData = [];

        // ============================================================================
        // DOM Elements
        // ============================================================================
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const step3 = document.getElementById('step3');
        const resultsStep = document.getElementById('results-step');

        const researcherInput = document.getElementById('researcher-name');
        const searchBtn = document.getElementById('search-btn');
        const searchStatus = document.getElementById('search-status');

        const authorSelect = document.getElementById('author-select');
        const confirmAuthorBtn = document.getElementById('confirm-author-btn');

        const yearsSlider = document.getElementById('years-slider');
        const yearsValue = document.getElementById('years-value');
        const findBtn = document.getElementById('find-btn');
        const findStatus = document.getElementById('find-status');

        const resultTitle = document.getElementById('result-title');
        const resultAbstract = document.getElementById('result-abstract');
        const resultInfo = document.getElementById('result-info');
        const resultInfoText = document.getElementById('result-info-text');
        const startOverBtn = document.getElementById('start-over-btn');

        // ============================================================================
        // Helper Functions
        // ============================================================================
        function showStatus(element, message, type = 'loading') {
            element.innerHTML = `<div class="status status-${type}">${message}</div>`;
        }

        function clearStatus(element) {
            element.innerHTML = '';
        }

        function setLoading(btn, loading) {
            if (loading) {
                btn.classList.add('loading');
                btn.disabled = true;
            } else {
                btn.classList.remove('loading');
                btn.disabled = false;
            }
        }

        function showStep(stepElement) {
            stepElement.classList.remove('hidden');
            stepElement.classList.add('fade-enter');
        }

        function hideStep(stepElement) {
            stepElement.classList.add('hidden');
        }

        function completeStep(stepElement) {
            stepElement.classList.remove('active');
            stepElement.classList.add('completed');
        }

        function activateStep(stepElement) {
            stepElement.classList.add('active');
            stepElement.classList.remove('completed');
        }

        // ============================================================================
        // API Functions
        // ============================================================================
        async function searchAuthors(name) {
            const response = await fetch(`${API_BASE}/api/search`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name })
            });

            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.detail || 'Search failed');
            }

            const data = await response.json();
            return data.authors;
        }

        async function findRepresentativePaper(authorId, years) {
            const response = await fetch(`${API_BASE}/api/find`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ author_id: authorId, years })
            });

            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.detail || 'Analysis failed');
            }

            return await response.json();
        }

        // ============================================================================
        // Event Handlers
        // ============================================================================
        researcherInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                searchBtn.click();
            }
        });

        searchBtn.addEventListener('click', async () => {
            const name = researcherInput.value.trim();
            if (!name) return;

            setLoading(searchBtn, true);
            showStatus(searchStatus, 'Searching...', 'loading');

            try {
                authorsData = await searchAuthors(name);

                if (authorsData.length === 0) {
                    showStatus(searchStatus, 'No researchers found. Try a different name.', 'error');
                    setLoading(searchBtn, false);
                    return;
                }

                // Populate dropdown
                authorSelect.innerHTML = '<option value="">Select an author...</option>';
                authorsData.forEach(author => {
                    const option = document.createElement('option');
                    option.value = author.id;
                    option.textContent = author.label;
                    authorSelect.appendChild(option);
                });

                clearStatus(searchStatus);
                completeStep(step1);
                showStep(step2);
                activateStep(step2);
                setLoading(searchBtn, false);
            } catch (error) {
                console.error('Search error:', error);
                showStatus(searchStatus, `Search failed: ${error.message}`, 'error');
                setLoading(searchBtn, false);
            }
        });

        authorSelect.addEventListener('change', () => {
            selectedAuthorId = authorSelect.value;
            confirmAuthorBtn.disabled = !selectedAuthorId;
        });

        confirmAuthorBtn.addEventListener('click', () => {
            if (!selectedAuthorId) return;

            completeStep(step2);
            showStep(step3);
            activateStep(step3);
        });

        yearsSlider.addEventListener('input', () => {
            yearsValue.textContent = yearsSlider.value;
        });

        findBtn.addEventListener('click', async () => {
            setLoading(findBtn, true);
            showStatus(findStatus, 'Analyzing publications... This may take a moment.', 'loading');

            try {
                const result = await findRepresentativePaper(selectedAuthorId, parseInt(yearsSlider.value));

                resultTitle.textContent = result.title;
                resultAbstract.textContent = result.abstract;

                if (result.info) {
                    resultInfoText.textContent = result.info;
                    resultInfo.classList.remove('hidden');
                } else {
                    resultInfo.classList.add('hidden');
                }

                clearStatus(findStatus);
                completeStep(step3);
                showStep(resultsStep);
                setLoading(findBtn, false);
            } catch (error) {
                console.error('Analysis error:', error);
                showStatus(findStatus, `Analysis failed: ${error.message}`, 'error');
                setLoading(findBtn, false);
            }
        });

        startOverBtn.addEventListener('click', () => {
            selectedAuthorId = null;
            authorsData = [];
            researcherInput.value = '';
            authorSelect.innerHTML = '<option value="">Select an author...</option>';
            yearsSlider.value = 5;
            yearsValue.textContent = '5';
            confirmAuthorBtn.disabled = true;

            hideStep(step2);
            hideStep(step3);
            hideStep(resultsStep);

            step1.classList.remove('completed');
            step2.classList.remove('completed', 'active');
            step3.classList.remove('completed', 'active');

            activateStep(step1);

            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>
